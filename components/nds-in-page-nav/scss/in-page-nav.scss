@import '~@nice-digital/nds-core/scss/core';

////
/// @group components
////

/// In page nav
.in-page-nav {
  margin: rem(0 0 $nds-spacing-large);

  // The 'on this page' title
  &__title {
    @include nds-font-size(h4);
    margin-top: 0;
  }

  // Lists (both root level and sub level)
  &__list {
    list-style: disc;
    margin-left: em($nds-spacing-medium);

    .in-page-nav__list {
      list-style: circle;
    }
  }

  a {
    &:visited {
      color: $nds-colour-link;
    }

    &:focus {
      background: none;
    }
  }

  @include mq($from: md) {
    margin: 0;
    position: sticky;
    top: rem($nds-spacing-small);

    // Fixed modifier for a JS implementation.
    // Ideally we use the position: sticky option but if we _really_ need a JS
    // fallback then we can apply this class.
    &--fixed {
      position: fixed;
      top: 0;

      .in-page-nav__title {
        margin-top: rem($nds-spacing-small);
      }
    }

    &__list {
      .in-page-nav__list {
        height: 0;
        overflow: hidden;
      }

      .in-page-nav__list:focus-within {
        height: auto;
        overflow: visible;
      }
    }

    a {
      &[aria-current='location'] {
        font-weight: bold;
      }

      &[aria-current],
      &:focus {
        + .in-page-nav__list {
          height: auto;
          overflow: visible;
        }
      }
    }
  }
}
